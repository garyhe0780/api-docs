<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Websocket API | DueDEX API docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Websocket API | DueDEX API docs"><meta data-react-helmet="true" name="description" content="General"><meta data-react-helmet="true" property="og:description" content="General"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/websocket"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/websocket"><link rel="stylesheet" href="/styles.3d8216dd.css">
<link rel="preload" href="/styles.f9c20742.js" as="script">
<link rel="preload" href="/runtime~main.3204687f.js" as="script">
<link rel="preload" href="/main.b65624a6.js" as="script">
<link rel="preload" href="/common.3cc865f0.js" as="script">
<link rel="preload" href="/2.8ea2a16d.js" as="script">
<link rel="preload" href="/11.414f277a.js" as="script">
<link rel="preload" href="/ec1ed54d.50e45ba1.js" as="script">
<link rel="preload" href="/17896441.5ec16f9d.js" as="script">
<link rel="preload" href="/d134ffd3.d3eddce8.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">API Documentation</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">API Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rest">REST API Documentation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">WebSocket</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/websocket">Websocket API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DataTypes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/dataTypes">Data Types</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Websocket API</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="general"></a>General<a aria-hidden="true" tabindex="-1" class="hash-link" href="#general" title="Direct link to heading">#</a></h2><p>DueDEX offers a fully-featured WebSocket API for real-time streaming, the same endpoint used by our official website, thus enabling you to automate any real-time functionality you see on the web app.</p><p>To connect to the WebSocket feed, use this endpoint:</p><p><strong>wss://feed.duedex.com/v1/feed</strong></p><p>For Testnet, use this endpoint instead:</p><p><strong>wss://feed.testnet.duedex.com/v1/feed</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="authentication"></a>Authentication<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authentication" title="Direct link to heading">#</a></h2><p>You need to authenticate your session if you want to subscribe to private channels. In case the connection is lost, your have to go through the authentication process again after reconnecting.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Note that authentication is <em>not</em> mandatory if you&#x27;re only subscribing to public channels.</p><p>Your API key would need to have <code>view</code> permission to successfully authenticate.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="authentication-flow"></a>Authentication Flow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authentication-flow" title="Direct link to heading">#</a></h3><p>To authenticate, the client first sends a <code>challenge</code> message:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;challenge&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Upon receiving the <code>challenge</code> request, the server responds with a <code>challenge</code> response, with a random string for you to sign:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;challenge&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;challenge&quot;: &quot;1f94d8db-a9ca-4cf4-82ee-9692f937032e&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>The client then signs (with algorithm and example below) the challenge to generate an answer, and sends it via an <code>auth</code> message alongside your API key:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;auth&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;key&quot;: &quot;YOUR_API_KEY_ID_HERE&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;answer&quot;: &quot;3563bd49f03177a4aa5efce5ad2042d4416452523eb42d8ddf11b946b0e1d267&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>If the answer is correct, the server responds with an <code>auth</code> message with your user id:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;auth&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;userId&quot;: 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>If the answer is wrong, the connection is terminated immediately and you need to reconnect to start over.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="signature-algorithm"></a>Signature Algorithm<a aria-hidden="true" tabindex="-1" class="hash-link" href="#signature-algorithm" title="Direct link to heading">#</a></h3><p>Each API key comes with an ID and a secret (which is shown only once upon creation). The key ID is sent in the <code>auth</code> request, and the secret is used to sign the challenge in order to generate an answer.</p><p>The secret is Base64 encoded. To use it for signature purposes, decode it first:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">secretKey = base64.decode(apiSecret)</span></div></div></div></div></div><p>Then, apply the <code>HMAC-SHA256</code> algorithm on the challenge (treat the challenge as plain string for signature):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">signature = HMACSHA256(challenge, secretKey)</span></div></div></div></div></div><p>Finally, convert the signature into hexadecimal form (case-insensitive):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">answer = signature.toHex()</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example"></a>Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a></h4><p>In this example, we&#x27;ll assume the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">API Key: 13f1ab93-771d-4d59-bb6a-fe96f6b609ea</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">API Secret: 2W2eSP3e0dp+lYMuY1MBUTqF2+8VbNRxDZ88zA7MliU=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Challenge: fd14408d-1740-447d-b335-c019f9201b6e</span></div></div></div></div></div><p>First, decode the API secret into byte array:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">secretKey = base64.decode(&quot;2W2eSP3e0dp+lYMuY1MBUTqF2+8VbNRxDZ88zA7MliU=&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[217, 109, 158, 72, 253, 222, 209, 218, 126, 149, 131, 46, 99, 83, 1, 81, 58, 133, 219, 239, 21, 108, 212, 113, 13, 159, 60, 204, 14, 204, 150, 37]</span></div></div></div></div></div><p>Then apply the hashing algorithm:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">signature = HMACSHA256(&quot;fd14408d-1740-447d-b335-c019f9201b6e&quot;, secretKey)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[180, 24, 237, 212, 102, 155, 130, 171, 55, 165, 182, 213, 68, 107, 157, 239, 56, 102, 88, 232, 243, 239, 3, 22, 89, 53, 255, 107, 114, 254, 167, 16]</span></div></div></div></div></div><p>Some libraries return the hexadecimal representation in this step directly. If your library doesn&#x27;t, convert the byte array into the hex form:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">answer = signature.toHex()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">b418edd4669b82ab37a5b6d5446b9def386658e8f3ef03165935ff6b72fea710</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-websocket-streams"></a>Using WebSocket Streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-websocket-streams" title="Direct link to heading">#</a></h2><p>After successful connection to the WebSocket endpoint, no messages will be sent to you by default. To receive real-time data and maintain an up-to-date state in-memory, follow these steps:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="subscribe"></a>Subscribe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#subscribe" title="Direct link to heading">#</a></h3><p>Send a <code>subscribe</code> request (with details in the <a href="#subscription">next section</a>) to listen to updates in channels.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="handle-snapshot-message"></a>Handle <code>snapshot</code> Message<a aria-hidden="true" tabindex="-1" class="hash-link" href="#handle-snapshot-message" title="Direct link to heading">#</a></h3><p>After successful subscription, the server will send a message with type <code>snapshot</code>, which contains the latest data in the channel.</p><blockquote><p><strong>NOTE</strong></p><p>A <code>snapshot</code> message will always be sent upon subscription, regardless of whether you have already subscribed to the channel.</p></blockquote><p>For example, in the <code>level2</code> channel, the <code>snapshot</code> message contains the complete orderbook data with all bids and asks.</p><p>The <code>snapshot</code> message contains a <code>sequence</code> field, which is used for processing incremental updates.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="handle-update-message"></a>Handle <code>update</code> Message<a aria-hidden="true" tabindex="-1" class="hash-link" href="#handle-update-message" title="Direct link to heading">#</a></h3><p>After the <code>snapshot</code> message is sent, the server will start pushing <code>update</code> messages. The <code>update</code> messages contain <em>only</em> incremental updates to the snapshot. The client is responsible for applying the updates to the snapshot locally to keep the state up-to-date.</p><p>While the server tries to send the <code>snapshot</code> message right after a subscription request is received, it&#x27;s still possible that the client receives <code>update</code> messages before the big <code>snapshot</code> message arrives. In this case, the client <em>must</em> buffer these <code>update</code> messages and process them after the <code>snapshot</code> arrives.</p><p><code>update</code> messages also contain a <code>sequence</code> field corresponding to the one in <code>snapshot</code> messages.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relationship-between-sequence-in-update-and-snapshot"></a>Relationship between <code>sequence</code> in <code>update</code> and <code>snapshot</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#relationship-between-sequence-in-update-and-snapshot" title="Direct link to heading">#</a></h4><ul><li><p>The initial empty snapshot has a <code>sequence</code> of <code>0</code></p></li><li><p>The first-ever <code>update</code> to the snapshot has a <code>sequence</code> of <code>1</code></p></li><li><p>After applying the update <code>#1</code>, the <code>sequence</code> of the snapshot increments to <code>1</code> as well</p></li><li><p>The next update has a sequence of <code>2</code>...</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ignoring-update-messages"></a>Ignoring <code>update</code> Messages<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ignoring-update-messages" title="Direct link to heading">#</a></h4><p>As mentioned above, it is possible the client receives <code>update</code> messages before the <code>snapshot</code> message. The correct logic for handling such case is as follows:</p><ul><li><p>Subscribe to the channel and listen to messages</p></li><li><p>Buffer <code>update</code> messages if they arrive before the <code>snapshot</code> message</p></li><li><p>Receive <code>snapshot</code> message</p></li><li><p>If the buffer is <strong>not</strong> empty, remove <code>update</code> messages with <code>sequence</code> smaller than or equal to that of <code>snapshot</code></p></li><li><p>If the buffer is still <strong>not</strong> empty, apply the remaining <code>update</code> messages</p></li><li><p>Clear the buffer</p></li><li><p>Apply subsequent <code>update</code> messages directly on the snapshot</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cases-in-which-you-should-resubscribe"></a>Cases in which You should Resubscribe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cases-in-which-you-should-resubscribe" title="Direct link to heading">#</a></h4><p>In rare cases, the <code>sequence</code> in <code>snapshot</code> and <code>update</code> messages might not connect:</p><ul><li><p>The first <code>update</code> message received has a <code>sequence</code> greater than the snapshot <code>sequence</code> plus one</p></li><li><p><code>sequence</code> field in a <code>update</code> message does not equal the last <code>sequence</code> plus one</p></li></ul><p>In these cases, you should first unsubscribe and then subscribe again to retry.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="subscription"></a>Subscription<a aria-hidden="true" tabindex="-1" class="hash-link" href="#subscription" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="channel-types"></a>Channel Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#channel-types" title="Direct link to heading">#</a></h3><p>With regard to whether authentication is required, channels can be divided into:</p><ul><li><p><strong>Public Channels</strong></p><p>  Authentication is not required (e.g. <code>level2</code>)</p></li><li><p><strong>Private Channels</strong></p><p>  Authentication is required (e.g. <code>orders</code>)</p></li></ul><p>With regard to whether the channel is instrument-specific, channels can be divided into:</p><ul><li><p><strong>Instrument Channels</strong></p><p>  The channel is instrument-specific (e.g. <code>matches</code>)</p></li><li><p><strong>Non-Instrument Channels</strong></p><p>  The channel is not instrument-specific (e.g. <code>positions</code>)</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="subcribe"></a>Subcribe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#subcribe" title="Direct link to heading">#</a></h3><p>To subscribe to a channel, send a <code>subscribe</code> request:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;subscribe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channels&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;level2&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;instruments&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;BTCUSD&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Note that you <em>must not</em> send the <code>instruments</code> field for non-instrument channels. You can set to to an empty array or ignore the field altogether.</p><p>If the request is invalid (invalid instrument ids, not authenticated for private channels, etc.), the connection will be aborted immediately.</p><p>Upon successful subscription, a response is sent from the server:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;subscriptions&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channels&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;level2&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;instruments&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;BTCUSD&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unsubscribe"></a>Unsubscribe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unsubscribe" title="Direct link to heading">#</a></h3><p>Unsubscribing is the same as subscribing, except the <code>type</code> field is changed from <code>subscribe</code> to <code>unsubscribe</code>. For instance, to unsubscribe from the channel above:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;unsubscribe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channels&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;level2&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;instruments&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;BTCUSD&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="atomicity"></a>Atomicity<a aria-hidden="true" tabindex="-1" class="hash-link" href="#atomicity" title="Direct link to heading">#</a></h2><p>DueDEX supports batching of atomic updates. Multiple updates sent within an <code>update</code> message are atomic, meaning that no intermediate state exists between each update.</p><p>In your application, you must <em>not</em> trigger actions on each update item. Instead, only trigger processing after the whole <code>update</code> message is completely processed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="channel-messages"></a>Channel Messages<a aria-hidden="true" tabindex="-1" class="hash-link" href="#channel-messages" title="Direct link to heading">#</a></h2><p>The structures for <code>snapshot</code> and <code>update</code> messages are the same across all channels, which significantly simplifies development.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="snapshot-messages"></a><code>snapshot</code> Messages<a aria-hidden="true" tabindex="-1" class="hash-link" href="#snapshot-messages" title="Direct link to heading">#</a></h3><p><code>snapshot</code> message format:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;snapshot&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channel&quot;: CHANNEL_NAME,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;instrument&quot;: INSTRUMENT_ID_IF_ANY,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sequence&quot;: SNAPSHOT_SEQUENCE,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: CHANNEL_DATA_TYPE,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;timestamp&quot;: UNIX_TIMESTAMP_MILLISECONDS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>where the <code>data</code> field is the channel-specific data type.</p><p>The <code>snapshot</code> message contains a complete state.</p><p>An example <code>snapshot</code> message:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;snapshot&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channel&quot;: &quot;level2&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;instrument&quot;: &quot;BTCUSD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sequence&quot;: 100,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;bids&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;8804.00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;8803.00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;asks&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;8855.00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                600</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;8856.00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;8857.00&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;timestamp&quot;: &quot;2019-05-30T00:00:00.000Z&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="update-messages"></a><code>update</code> Messages<a aria-hidden="true" tabindex="-1" class="hash-link" href="#update-messages" title="Direct link to heading">#</a></h3><p><code>update</code> message format:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;update&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channel&quot;: CHANNEL_NAME,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;instrument&quot;: INSTRUMENT_ID_IF_ANY,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sequence&quot;: SNAPSHOT_SEQUENCE,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: CHANNEL_DATA_TYPE,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;timestamp&quot;: UNIX_TIMESTAMP_MILLISECONDS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>which is identical to the format of <code>snapshot</code> messages except the <code>type</code> field.</p><p>As opposed to <code>snapshot</code>, <code>update</code> messages only contain the incremental updates. The <code>data</code> field (or each element within, if <code>data</code> is an array) contains <em>only</em> the item&#x27;s primary key for you to locate the item, and the fields being updated.</p><p>If the primary key provided doesn&#x27;t correspond to an item in your local state, it means a new item is created.</p><blockquote><p><strong>TIPS</strong></p><p>Some channels are insert-only (e.g. the <code>matches</code> channel - obviously you can&#x27;t modify an existing match). In these channels, the <code>data</code> field will present all the fields of the model in <code>update</code> messages.</p></blockquote><p>An example <code>update</code> message:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;update&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;channel&quot;: &quot;margins&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sequence&quot;: 9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;currency&quot;: &quot;BTC&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;available&quot;: &quot;1.948500&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;orderMargin&quot;: &quot;0.011500&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;timestamp&quot;: &quot;2019-05-30T00:00:00.000Z&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="channels"></a>Channels<a aria-hidden="true" tabindex="-1" class="hash-link" href="#channels" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="level2-channel"></a><code>level2</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#level2-channel" title="Direct link to heading">#</a></h3><p>This channel maintains the latest level-2 orderbook under an instrument.</p><ul><li><p><strong>Channel Name</strong></p><p>  level2</p></li><li><p><strong>Channel Type</strong></p><p>  Public Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>instance</strong> of <a href="/dataTypes#Orderbook">Orderbook</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ticker-channel"></a><code>ticker</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ticker-channel" title="Direct link to heading">#</a></h3><p>This channel maintains the latest ticker under an instrument.</p><ul><li><p><strong>Channel Name</strong></p><p>  ticker</p></li><li><p><strong>Channel Type</strong></p><p>  Public Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>instance</strong> of <a href="/dataTypes#Ticker">Ticker</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="matches-channel"></a><code>matches</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#matches-channel" title="Direct link to heading">#</a></h3><p>This channel maintains the recent matches under an instrument.</p><ul><li><p><strong>Channel Name</strong></p><p>  matches</p></li><li><p><strong>Channel Type</strong></p><p>  Public Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>array</strong> of <a href="/dataTypes#Match">Match</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="orders-channel"></a><code>orders</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#orders-channel" title="Direct link to heading">#</a></h3><p>This channel maintains the open orders of a user.</p><ul><li><p><strong>Channel Name</strong></p><p>  orders</p></li><li><p><strong>Channel Type</strong></p><p>  Private Non-Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>array</strong> of <a href="/dataTypes#Order">Order</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="positions-channel"></a><code>positions</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#positions-channel" title="Direct link to heading">#</a></h3><p>This channel maintains positions under all instruments of a user.</p><blockquote><p><strong>NOTE</strong></p><p>The position record won&#x27;t be removed from state even if you don&#x27;t have an active position. Instead, empty positions have their <code>quantity</code> fields set to <code>0</code>.</p></blockquote><ul><li><p><strong>Channel Name</strong></p><p>  positions</p></li><li><p><strong>Channel Type</strong></p><p>  Private Non-Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>array</strong> of <a href="/dataTypes#Position">Position</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="margins-channel"></a><code>margins</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#margins-channel" title="Direct link to heading">#</a></h3><p>This channel maintains margins of all currencies of a user.</p><ul><li><p><strong>Channel Name</strong></p><p>  margins</p></li><li><p><strong>Channel Type</strong></p><p>  Private Non-Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>array</strong> of <a href="/dataTypes#Margin">Margin</a></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="executions-channel"></a><code>executions</code> Channel<a aria-hidden="true" tabindex="-1" class="hash-link" href="#executions-channel" title="Direct link to heading">#</a></h3><p>This channel broadcasts executions of all orders across all instruments of a user.</p><ul><li><p><strong>Channel Name</strong></p><p>  executions</p></li><li><p><strong>Channel Type</strong></p><p>  Private Non-Instrument Channel</p></li><li><p><strong>Data Model</strong></p><p>  The <code>data</code> field on this channel is an <strong>array</strong> of <a href="/dataTypes#Execution">Execution</a></p></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rest"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« REST API Documentation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dataTypes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Types Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general" class="table-of-contents__link">General</a></li><li><a href="#authentication" class="table-of-contents__link">Authentication</a><ul><li><a href="#authentication-flow" class="table-of-contents__link">Authentication Flow</a></li><li><a href="#signature-algorithm" class="table-of-contents__link">Signature Algorithm</a></li></ul></li><li><a href="#using-websocket-streams" class="table-of-contents__link">Using WebSocket Streams</a><ul><li><a href="#subscribe" class="table-of-contents__link">Subscribe</a></li><li><a href="#handle-snapshot-message" class="table-of-contents__link">Handle <code>snapshot</code> Message</a></li><li><a href="#handle-update-message" class="table-of-contents__link">Handle <code>update</code> Message</a></li></ul></li><li><a href="#subscription" class="table-of-contents__link">Subscription</a><ul><li><a href="#channel-types" class="table-of-contents__link">Channel Types</a></li><li><a href="#subcribe" class="table-of-contents__link">Subcribe</a></li><li><a href="#unsubscribe" class="table-of-contents__link">Unsubscribe</a></li></ul></li><li><a href="#atomicity" class="table-of-contents__link">Atomicity</a></li><li><a href="#channel-messages" class="table-of-contents__link">Channel Messages</a><ul><li><a href="#snapshot-messages" class="table-of-contents__link"><code>snapshot</code> Messages</a></li><li><a href="#update-messages" class="table-of-contents__link"><code>update</code> Messages</a></li></ul></li><li><a href="#channels" class="table-of-contents__link">Channels</a><ul><li><a href="#level2-channel" class="table-of-contents__link"><code>level2</code> Channel</a></li><li><a href="#ticker-channel" class="table-of-contents__link"><code>ticker</code> Channel</a></li><li><a href="#matches-channel" class="table-of-contents__link"><code>matches</code> Channel</a></li><li><a href="#orders-channel" class="table-of-contents__link"><code>orders</code> Channel</a></li><li><a href="#positions-channel" class="table-of-contents__link"><code>positions</code> Channel</a></li><li><a href="#margins-channel" class="table-of-contents__link"><code>margins</code> Channel</a></li><li><a href="#executions-channel" class="table-of-contents__link"><code>executions</code> Channel</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 DueDEX, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.f9c20742.js"></script>
<script src="/runtime~main.3204687f.js"></script>
<script src="/main.b65624a6.js"></script>
<script src="/common.3cc865f0.js"></script>
<script src="/2.8ea2a16d.js"></script>
<script src="/11.414f277a.js"></script>
<script src="/ec1ed54d.50e45ba1.js"></script>
<script src="/17896441.5ec16f9d.js"></script>
<script src="/d134ffd3.d3eddce8.js"></script>
</body>
</html>